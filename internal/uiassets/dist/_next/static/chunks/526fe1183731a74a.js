(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let i=[{id:"demo",label:"1. Run Demo",note:"Create deterministic runpack"},{id:"verify_demo",label:"2. Verify",note:"Validate artifact integrity"},{id:"receipt_demo",label:"3. Ticket Footer",note:"Extract paste-ready proof"},{id:"regress_init",label:"4. Regress Init",note:"Create fixture from incident"},{id:"regress_run",label:"5. Regress Run",note:"Execute deterministic graders"},{id:"policy_block_test",label:"6. Policy Block",note:"Show fail-closed non-allow"}];async function n(e,t){let a,i=await fetch(e,t),n=await i.text();try{a=JSON.parse(n)}catch{throw Error(`invalid JSON from ${e}: ${n}`)}if(!i.ok)throw Error(`request failed (${i.status}): ${JSON.stringify(a)}`);return a}function s(){let e,[s,l]=(0,a.useState)("loading"),[r,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),[p,m]=(0,a.useState)("run_demo"),[x,f]=(0,a.useState)(""),[g,j]=(0,a.useState)(""),[y,_]=(0,a.useState)(null),[b,k]=(0,a.useState)(null),[v,N]=(0,a.useState)([]),S=(0,a.useMemo)(()=>r?r.ok?`Workspace: ${r.workspace}`:`State error: ${r.error??"unknown error"}`:"Loading workspace...",[r]),w=async()=>{try{return await n("/api/state")}catch(e){return{ok:!1,workspace:"",gait_config_exists:!1,error:e instanceof Error?e.message:"unknown error"}}};(0,a.useEffect)(()=>{(async()=>{try{await n("/api/health"),l("ok")}catch{l("error")}let e=await w();o(e),e.default_policy_path?f(e.default_policy_path):(e.policy_paths?.length??0)>0&&f(e.policy_paths[0]),e.default_intent_path?j(e.default_intent_path):(e.intent_paths?.length??0)>0&&j(e.intent_paths[0]),e.run_id&&m(e.run_id)})()},[]);let C=async e=>{h(e);try{let t={};"regress_init"===e&&(t.run_id=p.trim()),"policy_block_test"===e&&(t.policy_path=x,t.intent_path=g);let a=await n("/api/exec",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:e,args:t})}),i=await w();o(i),N(function(e,t){let a=new Map;for(let t of e?.artifacts??[])a.set(t.key,t);let i=[];for(let e of t.artifacts??[]){let t=a.get(e.key),n=`${e.key}${e.modified_at?` @ ${e.modified_at}`:""}`;if(!t){i.push(n);continue}(t.exists!==e.exists||t.modified_at!==e.modified_at)&&i.push(n)}return i}(r,i)),_(e),k(new Date().toISOString()),d(a)}catch(e){d({error:e instanceof Error?e.message:"unknown error"})}finally{h(null)}};return(0,t.jsxs)("div",{className:"page-shell",children:[(0,t.jsxs)("header",{className:"topbar",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:"Gait Local UI"}),(0,t.jsx)("p",{children:"Operator command center for first-run adoption and deterministic proof."})]}),(0,t.jsx)("div",{className:`health-pill health-${s}`,children:"loading"===s?"Checking...":"ok"===s?"Healthy":"Unavailable"})]}),(0,t.jsxs)("main",{className:"layout-grid",children:[(0,t.jsxs)("section",{className:"panel",children:[(0,t.jsx)("h2",{children:"15-Minute Flow"}),(0,t.jsx)("p",{className:"muted",children:S}),(0,t.jsxs)("div",{className:"status-grid",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"status-label",children:"Last Action"}),(0,t.jsx)("strong",{children:y?(e=i.find(e=>e.id===y),e?.label??y):"None yet"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"status-label",children:"Last Run At"}),(0,t.jsx)("strong",{children:b??"No runs yet"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"status-label",children:"Changed Artifacts"}),(0,t.jsx)("strong",{children:0===v.length?"None":v.join(", ")})]})]}),(0,t.jsxs)("div",{className:"input-grid",children:[(0,t.jsxs)("label",{children:["Regress Init run_id",(0,t.jsx)("input",{value:p,onChange:e=>m(e.target.value),disabled:null!==u})]}),(0,t.jsxs)("label",{children:["Policy Fixture",(0,t.jsx)("select",{value:x,onChange:e=>f(e.target.value),disabled:null!==u,children:(r?.policy_paths??[]).map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("label",{children:["Intent Fixture",(0,t.jsx)("select",{value:g,onChange:e=>j(e.target.value),disabled:null!==u,children:(r?.intent_paths??[]).map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]})]}),(0,t.jsx)("div",{className:"action-grid",children:i.map(e=>(0,t.jsxs)("button",{onClick:()=>void C(e.id),disabled:null!==u,children:[(0,t.jsx)("strong",{children:e.label}),(0,t.jsx)("span",{children:u===e.id?"Running...":e.note})]},e.id))}),(0,t.jsx)("pre",{className:"code-block",children:JSON.stringify(c,null,2)||"Run an action to view command output."})]}),(0,t.jsxs)("section",{className:"panel",children:[(0,t.jsx)("h2",{children:"Workspace State"}),(0,t.jsx)("pre",{className:"code-block",children:JSON.stringify(r,null,2)||"Loading..."})]})]})]})}e.s(["default",()=>s])}]);